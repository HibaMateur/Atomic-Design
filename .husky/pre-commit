#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo 'ğŸ’„ Styling your project...'
(yarn lint --fix) || (
    echo 'âŒ Failed Linting. Please fix your lint errors before committing.'
    exit false
)
echo 'âœ… Linting passed.'


# Check tsconfig standards
echo 'ğŸ” Checking tsconfig...'
yarn check-types || 
    (
        echo 'âŒ Failed Type Check. Please fix your typescript errors before committing.'
        exit false
    );
echo 'âœ… Type check passed.'

# Check prettier standards
echo 'ğŸ” Checking prettier...'
yarn check-lint || 
    (
        echo 'âŒ Failed Linter Check. Please fix your Linter errors before committing.'
        exit false
    );
echo 'âœ… Linter check passed.'

# Check format
echo 'ğŸ” Checking Prettier format...'
yarn check-format || 
    (
        echo 'âŒ Failed Prettier Format Check. Please fix your format errors before committing.'
        exit false
    );
echo 'âœ… Prettier Format check passed.'

# format
echo 'ğŸ“„ Formatting the code'
yarn format || 
    (
        echo 'âŒ Failed Format. Please fix your format errors before committing.'
        exit false
    );
echo 'âœ… Format the code passed.'

# lint staged changes
echo 'ğŸ” Linting staged changes...'
yarn lint-staged || 
    (
        echo 'âŒ Failed Linting Staged Changes. Please fix your lint errors before committing.'
        exit false
    );
echo 'âœ… Linting staged changes passed.'


# If everything ins ok, then commit
echo 'âœ… âœ… âœ… Everything looks good. Committing... âœ… âœ… âœ…'